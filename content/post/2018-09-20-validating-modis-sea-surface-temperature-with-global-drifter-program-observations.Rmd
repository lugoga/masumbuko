---
title: Validating MODIS Sea Surface Temperature with Global Drifter Program Observations
author: Masumbuko Semba
date: '2018-09-20'
categories:
  - R
tags:
  - Drifter
  - Indian Ocean
  - Masumbuko Semba
  - MODIS
  - Pemba Channel
  - Satellite
slug: validating-modis-sea-surface-temperature-with-global-drifter-program-observations
---

### Introduction


### Needed Packages
Several packages are needed for this routine (this assumes are installed already in the machine). The package include [tidyverse](https://www.tidyverse.org/)^[Wickham, H. (2017). Tidyverse: Easily install and load’tidyverse’packages. R package version, 1(1).], which is a collection of R packages designed for reading and importing data; manipulating and transforming imported data and visualize the results. The routine used several packages in the tidyverse including;

+ [ggplot2](https://ggplot2.tidyverse.org/)^[Wickham, H. (2016). ggplot2: elegant graphics for data analysis. Springer.] used for visualizing, mapping and exploring the data

+ [dplyr](https://dplyr.tidyverse.org/)^[Wickham, H., Francois, R., Henry, L., & Müller, K. (2015). dplyr: A grammar of data manipulation. R package version 0.4, 3.] used to manipulate and transform the modis and drifter data

+ [tidyr](https://tidyr.tidyverse.org/)^[Wickham, H. (2016). tidyr: Easily Tidy Data with spread () and gather () Functions. Version 0.6. 0.] used to consistently tidy the data from wide form to long form and ensure each variable goes in a colum and every observation goes into a row

+ [readr](https://readr.tidyverse.org/)^[Wickham, H., Hester, J., & Francois, R. (2016). Readr: read tabular data. URL https://github. com/hadley/readr. R package version 0.1, 1, 361.] for reading tabular drifter data

+ [xtractomatic](https://github.com/rmendels/xtractomatic)^[Mendelssohn, R. (2017). xtractomatic: accessing environmental data from ERD’s ERDDAP server. R package version, 3(2).] used to subset and extract satellite and other oceanographic related data from a remote server to the Area of Interest (AOI)



```{r package, comment="", warning=FALSE, message=FALSE}
require(tidyverse)
require(insol)
require(lubridate)
require(sf)
require(oce)
require(ocedata)
require(leaflet)
require(xtractomatic)
require(rerddapXtracto)

```


```{r drifter, comment="", message=FALSE, warning=FALSE}
drifters = read_table2("./fig8_drifters.txt", 
                       col_names = FALSE, comment = "#")

drifters = drifters%>%
  select(id = 1, lon = 2, lat = 3, drogue = 4, 
         u = 5, v = 6, sst = 7, year = 8, month =9, day = 10, hour = 11)
```


```{r date}

drifters = drifters%>%
  mutate(jd = JDymd(year = year, month = month, day = day, 
                    hour = hour), date = JD(jd, inverse = TRUE))%>%
  select(date, id, lon, lat, u, v, sst)

```


The data in table \@ref(tab:tab1) show 15 drifters obtained from Global Drifter Program
```{r tab1, echo=FALSE}

drifters%>%
  separate(date, c("Date", "Time"), sep = " ")%>%
  select(-Time)%>%
  sample_n(size = 15, replace = TRUE)%>%
  knitr::kable(caption = "Sample of drifter observations", 
               digits = 2, 
               align = "c", 
               col.names = c("Date", "ID", "Longitude", 
                             "Latitude", "Zonal (U)", "Meridional (V)", "SST"))

```

```{r, echo=FALSE}

drifter.70973 = drifters%>%filter(id == 70973)

```

Figure \@ref(fig:id1) is a drifter crossed the region between `r drifter.70973[1,1]` and `r drifter.70973[326,1]`

```{r id1, fig.cap="Drifter with Id 70973 crossed within the tropical indian ocean", echo=FALSE}

# ggplot()+geom_sf(data = drifter.sf%>%filter(id == 70973))

  
leaflet(data = drifter.70973%>%sample_frac(0.25))%>%
  addTiles()%>%
  addMarkers(lng = ~lon, lat = ~lat, popup = ~date)
```

```{r}
drifter.sf = drifters%>%st_as_sf(coords = c("lon", "lat"))%>%st_set_crs(4326)

```

### References
